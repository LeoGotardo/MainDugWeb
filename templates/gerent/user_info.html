{% extends 'gerent/base.html' %}

{% block body %}
    {{ super() }}
    <div class="container mt-4">
        <h2 class="text-center mb-4 text-primary fw-bold">Usuário</h2>
    
        <!-- Formulário de adição -->
        <form action="{{ url_for('edit_user', id=user.id) }}" method="POST" class="shadow-lg p-4 rounded bg-white border border-light">
            <div class="form-group mb-4">
                <label for="enable" class="form-label fw-semibold">Ativo</label>
                <input type="checkbox" class="form-control form-control-lg" id="enable" name="enable" value="True" {% if user.enabled %} checked {% endif %}>
            </div>
            
            <!-- Exibição de mensagens -->
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="alert alert-success fw-semibold text-center">
                        {% for message in messages %}
                            <p class="mb-0">{{ message }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            <!-- Botões de ação -->
            <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-primary btn-lg px-4">Atualizar Usuário</button>
                <a href="{{ url_for('login') }}" class="btn btn-outline-secondary btn-lg px-4">Cancelar</a>
            </div>
        </form>
    </div>

    <div class="container">
        <h2 class="text-center mb-4 text-primary fw-bold">Credenciais do usuário</h2>
        <a href="{{ url_for('add_credentials', id=user.id) }}" type="button" class="btn btn-primary btn-lg px-4 mb-4" data-bs-toggle="modal" data-bs-target="#modal-password">Adicionar nova credencial</a>
        <table class="table table-bordered table-striped text-center">
            <thead>
                <tr>
                    <th>Site</th>
                    <th>Login</th>
                    <th>Vazado</th>
                </tr>
            </thead>
            <tbody>
                {% for password in passwords %}
                    <td>{{ password.site }}</td>
                    <td>{{ password.login }}</td>
                    <td>
                        {% if password.status %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </svg>
                        {% else %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"/>
                            </svg>
                        {% endif %}
                    </td>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}

{% block style %}
    {{ super() }}
    <style>
        .custom-checkbox {
            accent-color: gray; /* Define a cor cinza para o checkbox */
        }
        
        /* Opcional: Personalização adicional ao passar o mouse */
        .custom-checkbox:hover {
            filter: brightness(90%);
        }

    </style>
{% endblock %}