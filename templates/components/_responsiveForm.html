<div class="responsive-form">
    {% if field.type != 'select' %}
    <div class="form-group my-3">
        {% if field.type != 'checkbox' %}
        <label for="{{ field.name }}">{{ field.label }} {% if field.required %}*{% endif %}</label>
        {% endif %}
        {% if field.type == 'checkbox' %}
        {% set required = field.required %}
        {% set label = field.label %}
        {% set id = field.name %}
        {% if account and user %}
        {% set checked = user[field.name] %}
        {% else %}
        {% set checked = field.checked %}
        {% endif %}
        {% include 'components/_switch.html' %}
        {% else %}
        <input type="{{ field.type }}" class="form-control" id="{{ field.name }}" name="{{ field.name }}" {% if
            field.placeholder %}placeholder="{{ field.placeholder }}" {% endif %} {% if field.required %}required{%
            endif %} {% if account and user %}value="{{user[field.name] }}" {% endif %}>
        {% endif %}
    </div>
    <div id="dynamic-fields-container-{{ field.name }}" class="dynamic-fields-container" style="display: none;"></div>
    {% else %}
    <div class="form-group my-3 responsive-select-container">
        <label for="{{ field.name }}">{{ field.label }} {% if field.required %}<span class="text-danger">*</span>{%
            endif %}</label>
        <select class="form-control" id="{{ field.name }}" name="{{ field.name }}" {% if field.required %}required{%
            endif %}>
            {% if account and user and user[field.name] %}
            {% set current_value = user[field.name] %}
            <option value="" disabled>Selecione uma opção...</option>
            {% for option in field.options %}
            <!-- NOVO: Adicionar dados da loja como atributos data- -->
            <option value="{{ option.value }}" {% if option.paymentType %}data-payment-type="{{ option.paymentType }}"
                {% endif %} {% if option.storeId %}data-store-id="{{ option.storeId }}" {% endif %} {% if
                option.value==current_value %}selected{% endif %}>
                {{ option.name }}
            </option>
            {% endfor %}
            {% else %}
            <option value="" disabled selected>Selecione uma opção...</option>
            {% for option in field.options %}
            <!-- NOVO: Adicionar dados da loja como atributos data- -->
            <option value="{{ option.value }}" {% if option.paymentType %}data-payment-type="{{ option.paymentType }}"
                {% endif %} {% if option.storeId %}data-store-id="{{ option.storeId }}" {% endif %}>
                {{ option.name }}
            </option>
            {% endfor %}
            {% endif %}
        </select>
    </div>
    <div id="dynamic-fields-container-{{ field.name }}" class="dynamic-fields-container" style="display: none;"></div>
    {% endif %}

    <style>
        .fade-out {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .dynamic-fields-container.show {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }

        .dynamic-form-group {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .dynamic-form-group.show {
            opacity: 1;
            transform: translateY(0);
        }

        .alert {
            border-radius: 8px;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .alert-info {
            background-color: #e3f2fd;
            color: #000000;
            border-left: 4px solid #2196f3;
        }

        /* NOVO: Animção suave para mudanças de conteúdo */
        .dynamic-form-group {
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .dynamic-fields-container {
            transition: all 0.3s ease;
        }
    </style>
</div>